---
import Container from '@/components/Container.astro';
import { SITE } from '@/consts';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const currentPath = Astro.url.pathname;

const navItems = [
  { href: `/${lang}/blog`, label: t('nav.blog') },
  { href: `/${lang}/work`, label: t('nav.work') },
  { href: `/${lang}/projects`, label: t('nav.projects') },
];

const isActive = (href: string) => currentPath.startsWith(href);
---

<header>
  <Container>
    <div class="flex flex-wrap justify-between items-center gap-y-2">
      <a href={`/${lang}/`} class="group flex items-center gap-3">
        <div class="flex flex-col">
          <span class="font-semibold text-(--text-primary) leading-tight">
            {SITE.NAME}
          </span>
        </div>
      </a>
      <nav class="flex items-center gap-1">
        {
          navItems.map(({ href, label }) => (
            <a
              href={href}
              class:list={[
                'px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200',
                isActive(href)
                  ? 'bg-(--accent-muted) text-(--accent)'
                  : 'text-(--text-secondary) hover:text-(--text-primary) hover:bg-(--surface-elevated)',
              ]}
            >
              {label}
            </a>
          ))
        }
      </nav>
    </div>
  </Container>
</header>
